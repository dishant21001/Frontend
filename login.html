<!DOCTYPE html>
<html>
<head>
    <title>Login Form</title>
    <link rel="stylesheet" href="login.css">
</head>
<body>

        <!-- App bar -->
        <div class="header">
            <a href="index.html" class="logo"> <img src="Images/LOGO1.png" alt=""> </a>
        </div>
        <!-- Login Container -->
        <div class="login-container">
            <h1>Login</h1>
            <form id="login-form">
                <label for="email"><i class="user-icon"></i>Email</label>
                <input type="text" id="email" name="email" required placeholder="Enter your email"><br>

                <label for="password"><i class="lock-icon"></i>Password</label>
                <input type="password" id="password" name="password" required placeholder="Enter your password"><br>

                <button id="login">Login</button>
            </form>
            <p>Don't have an account? <a href="register.html">Create an account</a></p>
        </div>


        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
            import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyDH3MTTgijLG7d5Q4t6nrpEuJnFMrL3ips",
                authDomain: "weatherbrainiac.firebaseapp.com",
                projectId: "weatherbrainiac",
                storageBucket: "weatherbrainiac.appspot.com",
                messagingSenderId: "373997009223",
                appId: "1:373997009223:web:e09b0883f6863695a87462",
                measurementId: "G-1JLB0DJ69R"
            };
            
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
    
            const auth = getAuth(app);
    
            document.getElementById('login').addEventListener('click', login)
    
            // Validate input and register User
            function login() {
                
                // Get the value from the form fields
                var email = document.getElementById('email').value;
                var password = document.getElementById('password').value;
            
                signInWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        // Signed in 
                        const user = userCredential.user;
                    })
                    .catch((error) => {
                        const errorCode = error.code;
                        const errorMessage = error.message;

                        switch (errorCode) {
                            case 'auth/user-not-found':
                                alert('User not found. Please check your email and try again or register a new account.');
                                break;
                            case 'auth/wrong-password':
                                alert('Invalid password. Please check your password and try again.');
                                break;
                            case 'auth/invalid-email':
                                alert('Invalid email address. Please enter a valid email.');
                                break;
                            default:
                                alert(`Sign-in failed: ${errorMessage}`);
                        }
                    });
            }

            onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in, see docs for a list of available properties
                // https://firebase.google.com/docs/reference/js/auth.user
                const uid = user.uid;
                window.location.href = "index.html";
                // ...
            } else {
                // User is signed out
                // ...
            }
            });
        </script>

</body>
</html>
