<!DOCTYPE html>
<html>
<head>
    <title>Login Form</title>
    <link rel="stylesheet" href="login.css">
</head>
<body>

    <!-- Logo at the top -->
    <div class="logo-container">
        <img src="/Images/LOGO1.png" alt="Your Website Logo">
    </div>

    <div class="login">
        <form id="login" onsubmit="loginUser(event)" action="login.php">
            <label><b>User Name</b></label>
            <input type="text" name="Uname" id="Uname" placeholder="Username">
            <br><br>
            <label><b>Password</b></label>
            <input type="Password" name="Pass" id="Pass" placeholder="Password">
            <br><br>
            <input type="button" name="log" id="log" value="Log In Here" onclick="loginUser(event)">
            <br><br>
            <input type="button" name="pa" id="pa" value="Forgot Password?">
            <a href="register.html">Create Account</a>
            <br><br>
            <input type="checkbox" id="check">
            <span>Remember me</span>
            <br><br>
            <!-- Create Account Link -->
            
        </form>
    </div>


        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";
            import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.6.0/firebase-auth.js";
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
                apiKey: "AIzaSyDH3MTTgijLG7d5Q4t6nrpEuJnFMrL3ips",
                authDomain: "weatherbrainiac.firebaseapp.com",
                projectId: "weatherbrainiac",
                storageBucket: "weatherbrainiac.appspot.com",
                messagingSenderId: "373997009223",
                appId: "1:373997009223:web:e09b0883f6863695a87462",
                measurementId: "G-1JLB0DJ69R"
            };
            
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
    
            const auth = getAuth(app);
    
            document.getElementById('login').addEventListener('click', login)
    
            // Validate input and register User
            function login() {
                
                // Get the value from the form fields
                var email = document.getElementById('email').value;
                var password = document.getElementById('password').value;
            
                signInWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        // Signed in 
                        const user = userCredential.user;
                    })
                    .catch((error) => {
                        const errorCode = error.code;
                        const errorMessage = error.message;

                        switch (errorCode) {
                            case 'auth/user-not-found':
                                alert('User not found. Please check your email and try again or register a new account.');
                                break;
                            case 'auth/wrong-password':
                                alert('Invalid password. Please check your password and try again.');
                                break;
                            case 'auth/invalid-email':
                                alert('Invalid email address. Please enter a valid email.');
                                break;
                            default:
                                alert(`Sign-in failed: ${errorMessage}`);
                        }
                    });
            }

            onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in, see docs for a list of available properties
                // https://firebase.google.com/docs/reference/js/auth.user
                const uid = user.uid;
                window.location.href = "index.html";
                // ...
            } else {
                // User is signed out
                // ...
            }
            });
        </script>

</body>
</html>
